import{r as f,R as d,d as q,j as c}from"./index-OtPSfN_w.js";import{u as Re,g as Be,y as Ue,z as $e}from"./components-Bicglw4e.js";import{M as je,e as k,j as ee,a as S,K as ie,k as le,l as He,m as We,n as Ge,o as Ve,v as ze,T as C,u as ke,c as Pe,I as G,p as ve,w as Ke,W as Xe,q as qe,S as Ye,r as Je,P as Qe,C as xe,B as ae,b as Ze,d as L}from"./Page-pFACYMxX.js";import{L as Y}from"./Layout-kpxSNHR3.js";import{S as et,B as J}from"./Banner-DTovbrWk.js";import{I as tt,R as nt,a as at,S as rt}from"./ResourceList-BMPt1jSY.js";import{E as st,p as ot,j as it}from"./context-C4lM4JaA.js";import{S as lt,F as ct}from"./context-Dqc0DVKX.js";import{F as be}from"./FormLayout-COkKuqS2.js";import"./banner-context-Bfu3e4If.js";var re={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function dt(){const t=f.useContext(lt);if(!t)throw new je("No ScrollLockManager was provided.");return t}function ut(t){const a=dt();return f.useEffect(()=>(a.registerScrollLock(),()=>{a.unregisterScrollLock()}),[a]),null}function pt(t){const{onClick:a,onTouchStart:l,belowNavigation:e,transparent:r,setClosing:n}=t,s=k(re.Backdrop,e&&re.belowNavigation,r&&re.transparent),o=()=>{n&&n(!0)},i=()=>{n&&n(!1),a&&a()};return d.createElement(d.Fragment,null,d.createElement(ut,null),d.createElement("div",{className:s,onClick:i,onTouchStart:l,onMouseDown:o}))}const ft=f.createContext(void 0),ht=f.memo(function({children:a,disabled:l,root:e}){return f.useEffect(()=>{if(l||!e)return;const r=mt(e)?e.current:e;!r||r.querySelector("[autofocus]")||ee(r,!1)},[l,e]),d.createElement(d.Fragment,null,a)});function mt(t){return t.current!==void 0}function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var e in l)({}).hasOwnProperty.call(l,e)&&(t[e]=l[e])}return t},Q.apply(null,arguments)}function ue(t,a){if(t==null)return{};var l={};for(var e in t)if({}.hasOwnProperty.call(t,e)){if(a.indexOf(e)!==-1)continue;l[e]=t[e]}return l}function ce(t,a){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,e){return l.__proto__=e,l},ce(t,a)}function pe(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,ce(t,a)}function gt(t,a){return t.classList?!!a&&t.classList.contains(a):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+a+" ")!==-1}function Et(t,a){t.classList?t.classList.add(a):gt(t,a)||(typeof t.className=="string"?t.className=t.className+" "+a:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+a))}function Ce(t,a){return t.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function vt(t,a){t.classList?t.classList.remove(a):typeof t.className=="string"?t.className=Ce(t.className,a):t.setAttribute("class",Ce(t.className&&t.className.baseVal||"",a))}const ye={disabled:!1},Z=d.createContext(null);var Fe=function(a){return a.scrollTop},X="unmounted",R="exited",B="entering",W="entered",de="exiting",M=(function(t){pe(a,t);function a(e,r){var n;n=t.call(this,e,r)||this;var s=r,o=s&&!s.isMounting?e.enter:e.appear,i;return n.appearStatus=null,e.in?o?(i=R,n.appearStatus=B):i=W:e.unmountOnExit||e.mountOnEnter?i=X:i=R,n.state={status:i},n.nextCallback=null,n}a.getDerivedStateFromProps=function(r,n){var s=r.in;return s&&n.status===X?{status:R}:null};var l=a.prototype;return l.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},l.componentDidUpdate=function(r){var n=null;if(r!==this.props){var s=this.state.status;this.props.in?s!==B&&s!==W&&(n=B):(s===B||s===W)&&(n=de)}this.updateStatus(!1,n)},l.componentWillUnmount=function(){this.cancelNextCallback()},l.getTimeouts=function(){var r=this.props.timeout,n,s,o;return n=s=o=r,r!=null&&typeof r!="number"&&(n=r.exit,s=r.enter,o=r.appear!==void 0?r.appear:s),{exit:n,enter:s,appear:o}},l.updateStatus=function(r,n){if(r===void 0&&(r=!1),n!==null)if(this.cancelNextCallback(),n===B){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:q.findDOMNode(this);s&&Fe(s)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===R&&this.setState({status:X})},l.performEnter=function(r){var n=this,s=this.props.enter,o=this.context?this.context.isMounting:r,i=this.props.nodeRef?[o]:[q.findDOMNode(this),o],u=i[0],m=i[1],g=this.getTimeouts(),h=o?g.appear:g.enter;if(!r&&!s||ye.disabled){this.safeSetState({status:W},function(){n.props.onEntered(u)});return}this.props.onEnter(u,m),this.safeSetState({status:B},function(){n.props.onEntering(u,m),n.onTransitionEnd(h,function(){n.safeSetState({status:W},function(){n.props.onEntered(u,m)})})})},l.performExit=function(){var r=this,n=this.props.exit,s=this.getTimeouts(),o=this.props.nodeRef?void 0:q.findDOMNode(this);if(!n||ye.disabled){this.safeSetState({status:R},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:de},function(){r.props.onExiting(o),r.onTransitionEnd(s.exit,function(){r.safeSetState({status:R},function(){r.props.onExited(o)})})})},l.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},l.safeSetState=function(r,n){n=this.setNextCallback(n),this.setState(r,n)},l.setNextCallback=function(r){var n=this,s=!0;return this.nextCallback=function(o){s&&(s=!1,n.nextCallback=null,r(o))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},l.onTransitionEnd=function(r,n){this.setNextCallback(n);var s=this.props.nodeRef?this.props.nodeRef.current:q.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!s||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],u=i[0],m=i[1];this.props.addEndListener(u,m)}r!=null&&setTimeout(this.nextCallback,r)},l.render=function(){var r=this.state.status;if(r===X)return null;var n=this.props,s=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var o=ue(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return d.createElement(Z.Provider,{value:null},typeof s=="function"?s(r,o):d.cloneElement(d.Children.only(s),o))},a})(d.Component);M.contextType=Z;M.propTypes={};function H(){}M.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:H,onEntering:H,onEntered:H,onExit:H,onExiting:H,onExited:H};M.UNMOUNTED=X;M.EXITED=R;M.ENTERING=B;M.ENTERED=W;M.EXITING=de;var xt=function(a,l){return a&&l&&l.split(" ").forEach(function(e){return Et(a,e)})},se=function(a,l){return a&&l&&l.split(" ").forEach(function(e){return vt(a,e)})},fe=(function(t){pe(a,t);function a(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(o,i){var u=e.resolveArguments(o,i),m=u[0],g=u[1];e.removeClasses(m,"exit"),e.addClass(m,g?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(o,i)},e.onEntering=function(o,i){var u=e.resolveArguments(o,i),m=u[0],g=u[1],h=g?"appear":"enter";e.addClass(m,h,"active"),e.props.onEntering&&e.props.onEntering(o,i)},e.onEntered=function(o,i){var u=e.resolveArguments(o,i),m=u[0],g=u[1],h=g?"appear":"enter";e.removeClasses(m,h),e.addClass(m,h,"done"),e.props.onEntered&&e.props.onEntered(o,i)},e.onExit=function(o){var i=e.resolveArguments(o),u=i[0];e.removeClasses(u,"appear"),e.removeClasses(u,"enter"),e.addClass(u,"exit","base"),e.props.onExit&&e.props.onExit(o)},e.onExiting=function(o){var i=e.resolveArguments(o),u=i[0];e.addClass(u,"exit","active"),e.props.onExiting&&e.props.onExiting(o)},e.onExited=function(o){var i=e.resolveArguments(o),u=i[0];e.removeClasses(u,"exit"),e.addClass(u,"exit","done"),e.props.onExited&&e.props.onExited(o)},e.resolveArguments=function(o,i){return e.props.nodeRef?[e.props.nodeRef.current,o]:[o,i]},e.getClassNames=function(o){var i=e.props.classNames,u=typeof i=="string",m=u&&i?i+"-":"",g=u?""+m+o:i[o],h=u?g+"-active":i[o+"Active"],N=u?g+"-done":i[o+"Done"];return{baseClassName:g,activeClassName:h,doneClassName:N}},e}var l=a.prototype;return l.addClass=function(r,n,s){var o=this.getClassNames(n)[s+"ClassName"],i=this.getClassNames("enter"),u=i.doneClassName;n==="appear"&&s==="done"&&u&&(o+=" "+u),s==="active"&&r&&Fe(r),o&&(this.appliedClasses[n][s]=o,xt(r,o))},l.removeClasses=function(r,n){var s=this.appliedClasses[n],o=s.base,i=s.active,u=s.done;this.appliedClasses[n]={},o&&se(r,o),i&&se(r,i),u&&se(r,u)},l.render=function(){var r=this.props;r.classNames;var n=ue(r,["classNames"]);return d.createElement(M,Q({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a})(d.Component);fe.defaultProps={classNames:""};fe.propTypes={};function bt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function he(t,a){var l=function(n){return a&&f.isValidElement(n)?a(n):n},e=Object.create(null);return t&&f.Children.map(t,function(r){return r}).forEach(function(r){e[r.key]=l(r)}),e}function Ct(t,a){t=t||{},a=a||{};function l(m){return m in a?a[m]:t[m]}var e=Object.create(null),r=[];for(var n in t)n in a?r.length&&(e[n]=r,r=[]):r.push(n);var s,o={};for(var i in a){if(e[i])for(s=0;s<e[i].length;s++){var u=e[i][s];o[e[i][s]]=l(u)}o[i]=l(i)}for(s=0;s<r.length;s++)o[r[s]]=l(r[s]);return o}function U(t,a,l){return l[a]!=null?l[a]:t.props[a]}function yt(t,a){return he(t.children,function(l){return f.cloneElement(l,{onExited:a.bind(null,l),in:!0,appear:U(l,"appear",t),enter:U(l,"enter",t),exit:U(l,"exit",t)})})}function St(t,a,l){var e=he(t.children),r=Ct(a,e);return Object.keys(r).forEach(function(n){var s=r[n];if(f.isValidElement(s)){var o=n in a,i=n in e,u=a[n],m=f.isValidElement(u)&&!u.props.in;i&&(!o||m)?r[n]=f.cloneElement(s,{onExited:l.bind(null,s),in:!0,exit:U(s,"exit",t),enter:U(s,"enter",t)}):!i&&o&&!m?r[n]=f.cloneElement(s,{in:!1}):i&&o&&f.isValidElement(u)&&(r[n]=f.cloneElement(s,{onExited:l.bind(null,s),in:u.props.in,exit:U(s,"exit",t),enter:U(s,"enter",t)}))}}),r}var Nt=Object.values||function(t){return Object.keys(t).map(function(a){return t[a]})},Dt={component:"div",childFactory:function(a){return a}},me=(function(t){pe(a,t);function a(e,r){var n;n=t.call(this,e,r)||this;var s=n.handleExited.bind(bt(n));return n.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},n}var l=a.prototype;return l.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},l.componentWillUnmount=function(){this.mounted=!1},a.getDerivedStateFromProps=function(r,n){var s=n.children,o=n.handleExited,i=n.firstRender;return{children:i?yt(r,o):St(r,s,o),firstRender:!1}},l.handleExited=function(r,n){var s=he(this.props.children);r.key in s||(r.props.onExited&&r.props.onExited(n),this.mounted&&this.setState(function(o){var i=Q({},o.children);return delete i[r.key],{children:i}}))},l.render=function(){var r=this.props,n=r.component,s=r.childFactory,o=ue(r,["component","childFactory"]),i=this.state.contextValue,u=Nt(this.state.children).map(s);return delete o.appear,delete o.enter,delete o.exit,n===null?d.createElement(Z.Provider,{value:i},u):d.createElement(Z.Provider,{value:i},d.createElement(n,o,u))},a})(d.Component);me.propTypes={};me.defaultProps=Dt;var oe={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},Se={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function Te({children:t,flush:a=!1,subdued:l=!1,titleHidden:e=!1}){const r=k(Se.Section,e&&Se.titleHidden);return d.createElement("div",{className:r},d.createElement(S,Object.assign({as:"section",padding:a?"0":"400"},e&&{paddingInlineEnd:"0"},l&&{background:"bg-surface-tertiary"}),t))}var x={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function Mt({trapping:t}){const a=f.useContext(ct),l=f.useId();if(!a)throw new je("No FocusManager was provided.");const{trapFocusList:e,add:r,remove:n}=a,s=e[0]===l,o=f.useMemo(()=>({canSafelyFocus:s}),[s]);return f.useEffect(()=>{if(t)return r(l),()=>{n(l)}},[r,l,n,t]),o}function jt({trapping:t=!0,children:a}){const{canSafelyFocus:l}=Mt({trapping:t}),e=f.useRef(null),[r,n]=f.useState(!0);f.useEffect(()=>{const i=l&&!(e.current&&e.current.contains(document.activeElement))?!t:!0;n(i)},[l,t]);const s=i=>{const u=e.current&&e.current.contains(document.activeElement);t===!1||!e.current||u||i.target instanceof Element&&i.target.matches(`${ot.selector} *`)||l&&i.target instanceof HTMLElement&&e.current!==i.target&&!e.current.contains(i.target)&&ee(e.current)},o=i=>{if(t===!1||!e.current)return;const u=He(e.current),m=We(e.current);i.target===m&&!i.shiftKey&&(i.preventDefault(),Ge(e.current)),i.target===u&&i.shiftKey&&(i.preventDefault(),Ve(e.current))};return d.createElement(ht,{disabled:r,root:e.current},d.createElement("div",{ref:e},d.createElement(st,{event:"focusin",handler:s}),d.createElement(ie,{keyCode:le.Tab,keyEvent:"keydown",handler:o}),a))}function kt({instant:t,labelledBy:a,children:l,limitHeight:e,size:r,onClose:n,onExited:s,onEntered:o,setClosing:i,hasToasts:u,...m}){const g=it(),h=f.useRef(null),N=f.useContext(ft);let D;N&&(D=N.toastMessages);const V=k(x.Modal,r&&x[ze("size",r)],e&&x.limitHeight),y=t?M:Ft;f.useEffect(()=>{h.current&&!h.current.contains(document.activeElement)&&ee(h.current)},[]);const z=()=>{i&&i(!0)},b=()=>{i&&i(!1),n()},I=d.createElement("div",{"aria-live":"assertive"},D?D.map(P=>d.createElement(C,{visuallyHidden:!0,as:"p",key:P.id},P.content)):null);return d.createElement(y,Object.assign({},m,{nodeRef:h,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(g.motion["motion-duration-200"],10),onEntered:o,onExited:s}),d.createElement("div",{className:x.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:h},d.createElement(jt,null,d.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":a,"aria-labelledby":a,tabIndex:-1,className:x.Dialog},d.createElement("div",{className:V},d.createElement(ie,{keyCode:le.Escape,keyEvent:"keydown",handler:z}),d.createElement(ie,{keyCode:le.Escape,handler:b}),l),I))))}const Pt={appear:k(x.animateFadeUp,x.entering),appearActive:k(x.animateFadeUp,x.entered),enter:k(x.animateFadeUp,x.entering),enterActive:k(x.animateFadeUp,x.entered),exit:k(x.animateFadeUp,x.exiting),exitActive:k(x.animateFadeUp,x.exited)};function Ft({children:t,...a}){return d.createElement(fe,Object.assign({},a,{classNames:Pt}),t)}function Ne({pressed:t,onClick:a}){const l=ke();return d.createElement(Pe,{variant:"tertiary",pressed:t,icon:et,onClick:a,accessibilityLabel:l.translate("Polaris.Common.close")})}function Tt({id:t,children:a,closing:l,titleHidden:e,onClose:r}){return e||!a?d.createElement(S,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},d.createElement(Ne,{onClick:r})):d.createElement(S,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},d.createElement(tt,{columns:{xs:"1fr auto"},gap:"400"},d.createElement(G,{gap:"400",blockAlign:"center"},d.createElement(C,{id:t,as:"h2",variant:"headingMd",breakWord:!0},a)),d.createElement(Ne,{pressed:l,onClick:r})))}function wt({primaryAction:t,secondaryActions:a,children:l}){const e=t&&ve(t,{variant:"primary"})||null,r=a&&ve(a)||null,n=e||r?d.createElement(G,{gap:"200"},r,e):null;return d.createElement(G,{gap:"400",blockAlign:"center"},d.createElement(S,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},d.createElement(G,{gap:"400",blockAlign:"center",align:"space-between"},d.createElement(S,null,l),n)))}const De=200,It=400,j=function({children:a,title:l,titleHidden:e=!1,src:r,iFrameName:n,open:s,instant:o,sectioned:i,loading:u,size:m,limitHeight:g,footer:h,primaryAction:N,secondaryActions:D,onScrolledToBottom:V,activator:y,activatorWrapper:z="div",onClose:b,onIFrameLoad:I,onTransitionEnd:P,noScroll:p}){const[E,v]=f.useState(De),[A,F]=f.useState(!1),T=f.useId(),w=f.useRef(null),_=ke().translate("Polaris.Modal.iFrameTitle");let ge,Ee;const we=f.useCallback(()=>{P&&P()},[P]),Ie=f.useCallback(()=>{v(De);const O=y&&Me(y)?y&&y.current:w.current;O&&requestAnimationFrame(()=>ee(O))},[y]),Ae=f.useCallback(O=>{const K=O.target;if(K&&K.contentWindow)try{v(K.contentWindow.document.body.scrollHeight)}catch{v(It)}I!=null&&I(O)},[I]);if(s){const O=!h&&!N&&!D?null:d.createElement(wt,{primaryAction:N,secondaryActions:D},h),K=i?Ke(a,Te,{titleHidden:e}):a,ne=u?d.createElement(S,{padding:"400"},d.createElement(G,{gap:"400",align:"center",blockAlign:"center"},d.createElement(Je,null))):K,Oe=p?d.createElement("div",{className:oe.NoScrollBody},d.createElement(S,{width:"100%",overflowX:"hidden",overflowY:"hidden"},ne)):d.createElement(Ye,{shadow:!0,className:oe.Body,onScrolledToBottom:V},ne),Le=r?d.createElement("iframe",{name:n,title:_,src:r,className:oe.IFrame,onLoad:Ae,style:{height:`${E}px`}}):Oe;ge=d.createElement(kt,{instant:o,labelledBy:T,onClose:b,onEntered:we,onExited:Ie,size:m,limitHeight:g,setClosing:F},d.createElement(Tt,{titleHidden:e,id:T,closing:A,onClose:b},l),Le,O),Ee=d.createElement(pt,{setClosing:F,onClick:b})}const te=!o,_e=y&&!Me(y)?d.createElement(S,{ref:w,as:z},y):null;return d.createElement(Xe.Provider,{value:!0},_e,d.createElement(qe,{idPrefix:"modal"},d.createElement(me,{appear:te,enter:te,exit:te},ge),Ee))};function Me(t){return Object.prototype.hasOwnProperty.call(t,"current")}j.Section=Te;function At(t){const a=t==null?void 0:t.match(/P(\d+)D/);return a?parseInt(a[1]):365}function Vt(){const{sellingPlanGroups:t}=Re(),a=Be(),l=Ue(),e=$e(),[r,n]=f.useState(!1),[s,o]=f.useState(!1),[i,u]=f.useState(!1),[m,g]=f.useState(null),[h,N]=f.useState({planName:"Tour Deposit Plan",depositPercentage:"15",balanceDueDays:"60",description:"Pay deposit today, balance due before tour",merchantCode:"tour-deposit"}),D=l.state==="submitting",V=f.useCallback(()=>{const p=new FormData;p.set("_action","create_selling_plan"),p.set("planName",h.planName),p.set("depositPercentage",h.depositPercentage),p.set("balanceDueDays",h.balanceDueDays),p.set("description",h.description),p.set("merchantCode",h.merchantCode),e(p,{method:"post"}),n(!1)},[h,e]),y=f.useCallback(()=>{if(!m)return;const p=new FormData;p.set("_action","update_selling_plan"),p.set("planId",m.id),p.set("planName",h.planName),p.set("description",h.description),p.set("merchantCode",h.merchantCode),e(p,{method:"post"}),o(!1),g(null)},[h,m,e]),z=f.useCallback(()=>{if(!m)return;const p=new FormData;p.set("_action","delete_selling_plan"),p.set("planId",m.id),e(p,{method:"post"}),u(!1),g(null)},[m,e]),b=f.useCallback((p,E)=>{N(v=>({...v,[p]:E}))},[]),I=f.useCallback(p=>{var F,T,w,$,_;g(p);const E=(F=p.sellingPlans.edges[0])==null?void 0:F.node,v=(($=(w=(T=E==null?void 0:E.billingPolicy)==null?void 0:T.checkoutCharge)==null?void 0:w.value)==null?void 0:$.percentage)||15,A=At(((_=E==null?void 0:E.billingPolicy)==null?void 0:_.remainingBalanceChargeTimeAfterCheckout)||"P60D");N({planName:p.name,depositPercentage:v.toString(),balanceDueDays:A.toString(),description:p.description||"",merchantCode:p.merchantCode}),o(!0)},[]),P=f.useCallback(p=>{g(p),u(!0)},[]);return c.jsxs(Qe,{title:"Selling Plans",subtitle:"Manage deposit payment plans for your products",primaryAction:c.jsx(Pe,{variant:"primary",onClick:()=>n(!0),children:"Create Selling Plan"}),children:[c.jsxs(Y,{children:[(a==null?void 0:a.success)&&c.jsx(Y.Section,{children:c.jsx(J,{tone:"success",children:a.message})}),(a==null?void 0:a.errors)&&c.jsx(Y.Section,{children:c.jsxs(J,{tone:"critical",children:[c.jsx("p",{children:"Error:"}),c.jsx("ul",{children:a.errors.map((p,E)=>c.jsx("li",{children:p.message},E))})]})}),c.jsx(Y.Section,{children:c.jsx(xe,{children:t.length>0?c.jsx(nt,{items:t,renderItem:p=>{var F,T,w,$,_;const{node:E}=p,v=(F=E.sellingPlans.edges[0])==null?void 0:F.node,A=($=(w=(T=v==null?void 0:v.billingPolicy)==null?void 0:T.checkoutCharge)==null?void 0:w.value)==null?void 0:$.percentage;return c.jsx(at,{id:E.id,shortcutActions:[{content:"Edit",onAction:()=>I(E)},{content:"Delete",destructive:!0,onAction:()=>P(E)}],children:c.jsx("div",{style:{padding:"12px 0"},children:c.jsxs(G,{align:"space-between",children:[c.jsxs(ae,{gap:"100",children:[c.jsx(C,{as:"h3",variant:"bodyLg",fontWeight:"bold",children:E.name}),c.jsx(C,{as:"p",variant:"bodyMd",tone:"subdued",children:E.description||"No description"}),c.jsxs(C,{as:"p",variant:"bodySm",tone:"subdued",children:["Code: ",E.merchantCode]})]}),c.jsxs(ae,{gap:"100",align:"end",children:[c.jsx(Ze,{tone:A?"success":"attention",children:A?`${A}% Deposit`:(v==null?void 0:v.category)||"Unknown"}),c.jsxs(C,{as:"p",variant:"bodySm",tone:"subdued",children:["ID: ",(_=v==null?void 0:v.id)==null?void 0:_.split("/").pop()]})]})]})})})}}):c.jsx(S,{padding:"800",children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx(C,{as:"p",variant:"bodyLg",children:"No selling plans found"}),c.jsx(C,{as:"p",variant:"bodyMd",tone:"subdued",children:"Create your first deposit plan to get started"})]})})})})]}),c.jsx(j,{open:r,onClose:()=>n(!1),title:"Create New Selling Plan",primaryAction:{content:"Create Plan",onAction:V,loading:D},secondaryActions:[{content:"Cancel",onAction:()=>n(!1)}],children:c.jsxs(j.Section,{children:[c.jsxs(be,{children:[c.jsx(L,{label:"Plan Name",value:h.planName,onChange:p=>b("planName",p),helpText:"Enter a descriptive name for your selling plan"}),c.jsx(L,{label:"Deposit Percentage",type:"number",value:h.depositPercentage,onChange:p=>b("depositPercentage",p),suffix:"%",min:"1",max:"99",helpText:"Percentage to charge as deposit (1-99%)"}),c.jsx(rt,{label:"Balance Due After",options:[{label:"30 days",value:"30"},{label:"60 days",value:"60"},{label:"90 days",value:"90"},{label:"6 months",value:"180"},{label:"1 year",value:"365"}],value:h.balanceDueDays,onChange:p=>b("balanceDueDays",p),helpText:"When should the remaining balance be charged?"}),c.jsx(L,{label:"Description",value:h.description,onChange:p=>b("description",p),multiline:2,helpText:"Description shown to customers"}),c.jsx(L,{label:"Merchant Code",value:h.merchantCode,onChange:p=>b("merchantCode",p),helpText:"Internal code for this plan (lowercase, no spaces)"})]}),c.jsx(S,{paddingBlockStart:"400",children:c.jsx(xe,{background:"bg-surface-info",children:c.jsx(S,{padding:"400",children:c.jsxs(ae,{gap:"200",children:[c.jsx(C,{as:"h4",variant:"headingSm",children:"Preview"}),c.jsx(C,{as:"p",variant:"bodyMd",children:c.jsx("strong",{children:"Customer will see:"})}),c.jsxs(C,{as:"p",variant:"bodySm",children:["• Due today: ",h.depositPercentage,"% deposit"]}),c.jsxs(C,{as:"p",variant:"bodySm",children:["• Due later: ",100-parseInt(h.depositPercentage||"0"),"% balance in ",h.balanceDueDays," days"]})]})})})})]})}),c.jsxs(j,{open:s,onClose:()=>{o(!1),g(null)},title:"Edit Selling Plan",primaryAction:{content:"Update Plan",onAction:y,loading:D},secondaryActions:[{content:"Cancel",onAction:()=>{o(!1),g(null)}}],children:[c.jsx(j.Section,{children:c.jsx(J,{tone:"info",children:c.jsx("p",{children:"Note: Editing a selling plan will update its display name and description, but won't affect existing orders or the deposit percentage."})})}),c.jsx(j.Section,{children:c.jsxs(be,{children:[c.jsx(L,{label:"Plan Name",value:h.planName,onChange:p=>b("planName",p),helpText:"Enter a descriptive name for your selling plan"}),c.jsx(L,{label:"Description",value:h.description,onChange:p=>b("description",p),multiline:2,helpText:"Description shown to customers"}),c.jsx(L,{label:"Merchant Code",value:h.merchantCode,onChange:p=>b("merchantCode",p),helpText:"Internal code for this plan (lowercase, no spaces)"})]})})]}),c.jsxs(j,{open:i,onClose:()=>{u(!1),g(null)},title:"Delete Selling Plan",primaryAction:{content:"Delete Plan",onAction:z,loading:D,destructive:!0},secondaryActions:[{content:"Cancel",onAction:()=>{u(!1),g(null)}}],children:[c.jsx(j.Section,{children:c.jsx(J,{tone:"critical",children:c.jsxs("p",{children:[c.jsx("strong",{children:"Warning:"})," This action cannot be undone."]})})}),c.jsxs(j.Section,{children:[c.jsxs(C,{as:"p",variant:"bodyMd",children:['Are you sure you want to delete "',c.jsx("strong",{children:m==null?void 0:m.name}),'"?']}),c.jsx(S,{paddingBlockStart:"200",children:c.jsx(C,{as:"p",variant:"bodySm",tone:"subdued",children:"This will permanently delete the selling plan and it will no longer be available for new purchases. Existing orders will not be affected."})})]})]})]})}export{Vt as default};
